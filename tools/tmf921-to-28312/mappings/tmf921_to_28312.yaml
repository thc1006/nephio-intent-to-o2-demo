# TMF921 to 3GPP TS 28.312 Field Mapping Configuration
# This file defines explicit mappings between TMF921 Intent format and 3GPP TS 28.312 IntentExpectation format
# Reference: 3GPP TS 28.312 V17.1.0 (2022-03) - Intent driven management services for mobile networks

version: "1.0"
metadata:
  title: "TMF921 to 3GPP TS 28.312 Mapping Rules"
  description: "Explicit field mappings with rationale based on 3GPP TS 28.312 specification"
  reference: "3GPP TS 28.312 V17.1.0 clause references provided"
  created: "2024-01-01"

# Target condition mappings from TMF921 to 28.312 enum values
target_conditions:
  lessThan: "LESS_THAN"
  greaterThan: "GREATER_THAN"
  equalTo: "EQUAL"
  between: "BETWEEN"
  notEqual: "NOT_EQUAL"
  lessThanOrEqual: "LESS_THAN_OR_EQUAL"
  greaterThanOrEqual: "GREATER_THAN_OR_EQUAL"

# Expectation type mappings from TMF921 to 3GPP TS 28.312
# Reference: TS 28.312 clause 6.2.2.2 - IntentExpectationType
expectation_types:
  deliver: "ServicePerformance"
  avoid: "ServicePerformance"
  maintain: "ServicePerformance"
  cease: "ServicePerformance"
  restore: "ServicePerformance"

# Object type mappings from TMF921 to 3GPP TS 28.312
# Reference: TS 28.312 clause 6.2.2.6 - IntentExpectationObject
object_types:
  service: "Service"
  networkSlice: "NetworkSlice"
  resource: "Resource"
  function: "NetworkFunction"
  slice: "NetworkSlice"

# Field mappings from TMF921 to 3GPP TS 28.312 IntentExpectation
# Reference: TS 28.312 clause 6.2.2 - IntentExpectation data type
field_mappings:
  # Top-level intent fields
  id: 
    target: "intentExpectationId"
    transform: "append_suffix"
    suffix: "-exp-{index}"
    rationale: "TS 28.312 requires unique expectation IDs, append index for multiple expectations"
  
  name:
    target: "_internal_name"
    rationale: "Store for context but no direct mapping in 28.312 IntentExpectation"
    
  description:
    target: "_internal_description"
    rationale: "Store for context but no direct mapping in 28.312 IntentExpectation"
    
  intentType:
    target: "_internal_intent_type"
    rationale: "Used to determine expectation type but no direct mapping"

  # IntentSpecification -> IntentExpectation mappings
  intentSpecification.intentExpectations:
    target: "multiple_expectations"
    rationale: "Each TMF921 expectation becomes a separate 28.312 IntentExpectation"

  # Expectation-level mappings
  expectationType:
    target: "intentExpectationType"
    transform: "lookup_expectation_type"
    rationale: "Map TMF921 expectation types to TS 28.312 IntentExpectationType enum"

  expectationObject:
    target: "intentExpectationObject"
    rationale: "Direct mapping with type transformation"
    sub_mappings:
      objectType:
        target: "objectType"
        transform: "lookup_object_type"
      objectInstance:
        target: "objectInstance"

  expectationTargets:
    target: "intentExpectationTarget"
    rationale: "Single target supported in 28.312, use first target if multiple"
    sub_mappings:
      targetName:
        target: "targetAttribute"
        rationale: "Direct mapping to target attribute"
      targetCondition:
        target: "targetCondition"
        transform: "lookup_target_condition"
      targetValue:
        target: "targetValue"
        transform: "combine_value_unit"
      targetUnit:
        target: "_combine_with_value"
        rationale: "Combined with targetValue in 28.312"

  expectationContext:
    target: "intentExpectationContext"
    rationale: "Map context parameters to 28.312 context structure"
    sub_mappings:
      contextParameter:
        target: "contextAttribute"
      contextValue:
        target: "contextValueRange"
        transform: "to_array"

# Unmapped fields - these will be reported in delta with detailed rationale
unmapped_fields:
  validFor:
    pattern: "validFor"
    reason: "No equivalent field in 3GPP TS 28.312 clause 6.2.2 - IntentExpectation data type lacks temporal validity constraints"
    suggested_mapping: "Could map to intentExpectationContext with temporal context attributes"
  intentSpecification_validFor:
    pattern: "intentSpecification.validFor"
    reason: "No equivalent field in 3GPP TS 28.312 clause 6.2.2 - IntentExpectation data type lacks temporal validity constraints"
    suggested_mapping: "Could map to intentExpectationContext with temporal context attributes"
  expectation_validFor:
    pattern: "intentSpecification.intentExpectations.*.validFor"
    reason: "No equivalent field in 3GPP TS 28.312 clause 6.2.2 - IntentExpectation data type lacks temporal validity constraints"
    suggested_mapping: "Could map to intentExpectationContext with temporal context attributes"
  category:
    pattern: "category"
    reason: "No equivalent field in 3GPP TS 28.312 clause 6.2.2 - Classification not supported in IntentExpectation structure"
    suggested_mapping: "Could be stored as metadata or in intentExpectationContext"
  priority:
    pattern: "priority"
    reason: "No equivalent field in 3GPP TS 28.312 clause 6.2.2 - Priority handling not defined in IntentExpectation"
    suggested_mapping: "Could be handled at Intent Management Service level per clause 7.2.4"
  state:
    pattern: "state"
    reason: "No equivalent field in 3GPP TS 28.312 clause 6.2.2 - State management handled via IntentReport per clause 6.2.3"
    suggested_mapping: "State information should be tracked via IntentReport.intentReportStatus"
  at_type:
    pattern: "@type"
    reason: "TMF921 JSON-LD type annotation - not applicable to 3GPP TS 28.312 clause 6.2.2 structure"
    suggested_mapping: "Type information captured in intentExpectationType enum"
  at_baseType:
    pattern: "@baseType"
    reason: "TMF921 JSON-LD inheritance annotation - not applicable to 3GPP TS 28.312 clause 6.2.2 structure"
    suggested_mapping: "Inheritance handled by 3GPP TS 28.312 data type definitions"
  at_schemaLocation:
    pattern: "@schemaLocation"
    reason: "TMF921 JSON-LD schema reference - not applicable to 3GPP TS 28.312 clause 6.2.2 structure"
    suggested_mapping: "Schema validation handled by 3GPP TS 28.312 specification compliance"
  customField:
    pattern: "customField"
    reason: "Custom field not defined in 3GPP TS 28.312 clause 6.2.2 - IntentExpectation extensibility not specified"
    suggested_mapping: "Could map to intentExpectationContext.contextAttribute if semantically appropriate"
  custom_expectation_field:
    pattern: "intentSpecification.intentExpectations.*.customExpectationField"
    reason: "Custom expectation field not defined in 3GPP TS 28.312 clause 6.2.2 - IntentExpectation extensibility not specified"
    suggested_mapping: "Could map to intentExpectationContext.contextAttribute if semantically appropriate"
  custom_target_field:
    pattern: "intentSpecification.intentExpectations.*.expectationTargets.*.customTargetField"
    reason: "Custom target field not defined in 3GPP TS 28.312 clause 6.2.2.4 - IntentExpectationTarget structure is fixed"
    suggested_mapping: "Could be incorporated into targetValue if it modifies the target semantically"

# Output templates for 3GPP TS 28.312 structures
templates:
  intent_expectation:
    intentExpectationId: "{generated}"
    intentExpectationType: "{mapped}"
    intentExpectationContext:
      contextAttribute: "{mapped}"
      contextCondition: "EQUAL"
      contextValueRange: ["{mapped}"]
    intentExpectationTarget:
      targetAttribute: "{mapped}"
      targetCondition: "{mapped}"
      targetValue: "{mapped}"
    intentExpectationObject:
      objectType: "{mapped}"
      objectInstance: "{mapped}"

  intent_report:
    intentReportId: "{generated}"
    intentExpectationId: "{reference}"
    intentReportStatus: "NOT_FULFILLED"
    timestamp: "{current_timestamp}"
    notFulfilledReason: "PENDING_MEASUREMENT"